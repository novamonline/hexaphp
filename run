#!/usr/bin/env php
<?php

define('DS', DIRECTORY_SEPARATOR);

$toolsDir = __DIR__ . DS . '.tools';
$cmdDir = $toolsDir . DS . 'cmd';
$stubsDir = $toolsDir . DS . 'stubs';

// Check if the command argument is provided
if (empty($argv[1])) {
    echo "Usage: ./run <command>" . PHP_EOL;
    exit(1);
}

// Map command aliases to script files
$commandMap = [
    'new_app' => 'install_app',
    'new_lib' => 'install_lib',
    'install' => 'installer',
    // Add more command aliases here
];

// Get the command to run
$commandAlias = $argv[1];

// Check if the command alias exists in the map
if (!isset($commandMap[$commandAlias])) {
    echo "Command not found: " . $commandAlias . PHP_EOL;
    exit(1);
}

// Get the path to the command script
$commandDir = $cmdDir . DS . $commandMap[$commandAlias];
$scriptPath = $commandDir . DS . 'exec.php';

// Check if the command script exists
if (!file_exists($scriptPath)) {
    echo "Command script not found: " . $scriptPath . PHP_EOL;
    exit(1);
}

// Load the command script
require $scriptPath;
